#!/usr/bin/env bash
set -euo pipefail
SCRIPT_DIR="$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" && pwd)"
PROJ_DIR="$(cd -- "${SCRIPT_DIR}/.." && pwd)"
VENV_BIN="${PROJ_DIR}/.venv/bin"
PY="${VENV_BIN}/python"

if [ ! -x "${PY}" ]; then
  echo "Project venv not found at ${VENV_BIN}." >&2
  echo "Create it with: python3 -m venv '${PROJ_DIR}/.venv' && '${VENV_BIN}/pip' install ib-insync" >&2
  exit 1
fi

exec "${PY}" "${PROJ_DIR}/tools/ibg_status.py" "$@"

